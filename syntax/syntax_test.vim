" ex: nowrap
let b:current_syntax = split(&filetype, '\.')[0] . '.syntax_test'

syntax case match
execute 'syntax match syntaxTestComment `\v^\s*\V' . b:syntax_test_comment . '\v.*$` contains=syntaxTestInclude,syntaxTestIncluded,syntaxTestCaretOrArrow,syntaxTestScope,syntaxTestNotScope'
execute 'syntax match syntaxTestInclude `\v(%^\s*\V' . b:syntax_test_comment . '\v\s+)@<=SYNTAX TEST(\s+)@=` contained'
execute 'syntax match syntaxTestIncluded `\v(%^\s*\V' . b:syntax_test_comment . '\v\s+SYNTAX TEST\s+)@<="[^"]+"` contained'
execute 'syntax match syntaxTestCaretOrArrow `\v%(^\s*\V' . b:syntax_test_comment . '\v\s*)@<=%(\<-|\^+)` contained'
execute 'syntax match syntaxTestScope `\v%(^\s*\V' . b:syntax_test_comment . '\v\s*%(\<-|\^+)\s*%(-|[a-z][a-z0-9.\-_+]*\s+)*)@<=[a-z][a-z0-9.\-_+]*` contained contains=syntaxTestKeyword'
execute 'syntax match syntaxTestNotScope `\v%(^\s*\V' . b:syntax_test_comment . '\v\s*%(\<-|\^+)\s*%(-|[a-z][a-z0-9.\-_+]*\s+)*)@<=-\s*[a-z][a-z0-9.\-_+]*` contained contains=syntaxTestKeyword'
" must at last to override the before
execute 'syntax match syntaxTestError `\v%^\s*\V' . b:syntax_test_comment . '\v(\s+SYNTAX TEST\s+"[^"]+".*)@!.*`'

highlight default link syntaxTestKeyword Underlined
highlight default link syntaxTestComment Comment
highlight default link syntaxTestInclude Include
highlight default link syntaxTestIncluded String
highlight default link syntaxTestCaretOrArrow Todo
highlight default link syntaxTestScope DiffAdd
highlight default link syntaxTestNotScope DiffDelete
highlight default link syntaxTestError Error
" updated by scripts/update-vim-plugin.vim
syntax match syntaxTestKeyword `\<\%(variable.parameter\|variable.other.readwrite\|variable.other.member\|variable.other.constant\|variable.other\|variable.language\|variable.function\|variable.annotation\|variable\|text.xml\|text.html\|text\|support.type\|support.module\|support.function\|support.constant\|support.class\|support\|string.unquoted\|string.regexp\|string.quoted.triple\|string.quoted.single\|string.quoted.other\|string.quoted.double\|string\|storage.type.union keyword.declaration.union\|storage.type.trait keyword.declaration.trait\|storage.type.struct keyword.declaration.struct\|storage.type.interface keyword.declaration.interface\|storage.type.impl keyword.declaration.impl\|storage.type.function keyword.declaration.function\|storage.type.enum keyword.declaration.enum\|storage.type.class keyword.declaration.class\|storage.type keyword.declaration.type\|storage.type\|storage.modifier\|storage\|source.*language-suffix*.embedded\|source\|punctuation.terminator\|punctuation.separator.continuation\|punctuation.separator\|punctuation.section.parens.end\|punctuation.section.parens.begin\|punctuation.section.interpolation.end\|punctuation.section.interpolation.begin\|punctuation.section.group.end\|punctuation.section.group.begin\|punctuation.section.brackets.end\|punctuation.section.brackets.begin\|punctuation.section.braces.end\|punctuation.section.braces.begin\|punctuation.section.block.end\|punctuation.section.block.begin\|punctuation.definition.variable\|punctuation.definition.string.end\|punctuation.definition.string.begin\|punctuation.definition.keyword\|punctuation.definition.generic.end\|punctuation.definition.generic.begin\|punctuation.definition.comment\|punctuation.definition.annotation\|punctuation.accessor\|punctuation\|meta.union\|meta.type\|meta.trait\|meta.toc-list\|meta.tag\|meta.struct\|meta.string\|meta.preprocessor\|meta.path\|meta.parens\|meta.paragraph\|meta.namespace\|meta.interpolation\|meta.interface\|meta.impl\|meta.group\|meta.generic\|meta.function.return-type\|meta.function.parameters\|meta.function-call\|meta.function\|meta.enum\|meta.class\|meta.brackets\|meta.braces\|meta.block\|meta.annotation.parameters\|meta.annotation.identifier\|meta.annotation\|meta\|markup.underline.link\|markup.underline\|markup.raw.inline\|markup.raw.block\|markup.quote\|markup.other\|markup.list.unnumbered\|markup.list.numbered\|markup.italic\|markup.inserted\|markup.heading\|markup.deleted\|markup.bold\|markup\|keyword.other\|keyword.operator.word\|keyword.operator.logical\|keyword.operator.bitwise\|keyword.operator.assignment\|keyword.operator.arithmetic\|keyword.operator\|keyword.control.import\|keyword.control.conditional\|keyword.control\|keyword\|invalid.illegal\|invalid.deprecated\|invalid\|entity.other.inherited-class\|entity.other.attribute-name\|entity.name.union\|entity.name.type\|entity.name.trait\|entity.name.tag\|entity.name.struct\|entity.name.section\|entity.name.namespace\|entity.name.label\|entity.name.interface\|entity.name.impl\|entity.name.function.destructor\|entity.name.function.constructor\|entity.name.function\|entity.name.enum\|entity.name.constant\|entity.name.class.forward-decl\|entity.name.class\|entity\|constant.other.placeholder\|constant.other\|constant.numeric.integer.other\|constant.numeric.integer.octal\|constant.numeric.integer.hexadecimal\|constant.numeric.integer.decimal\|constant.numeric.integer.binary\|constant.numeric.integer\|constant.numeric.float.other\|constant.numeric.float.octal\|constant.numeric.float.hexadecimal\|constant.numeric.float.decimal\|constant.numeric.float.binary\|constant.numeric.float\|constant.numeric.complex.real\|constant.numeric.complex.imaginary\|constant.numeric.complex\|constant.numeric\|constant.language\|constant.character.escape\|constant\|comment.line\|comment.block.documentation\|comment.block\|comment\)\ze\%(\.\|\>\)` contained
